<div
class="w-[512px]"
>
<div class="flex flex-wrap justify-between gap-3 p-4">
    <div class="flex min-w-[72px] flex-col gap-3">
    <p
        class="text-[#0e1b19] tracking-light text-[32px] font-bold leading-tight"
    >
        Create Your Plan
    </p>
    <p class="text-[#4f968f] text-sm font-normal leading-normal">
        Start by telling us about your goals, how active you are, and
        how long you'd like your plan to last.
    </p>
    </div>
</div>

<!-- GOALS SECTION -->
<h3
    class="text-[#0e1b19] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4"
>
    Your Goals
</h3>
<div class="flex flex-col gap-3 p-4">
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="goal"
        value="maintain"
        class="peer absolute inset-0 z-10 opacity-0"
        checked
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Maintain weight
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="goal"
        value="add"
        class="peer absolute inset-0 z-10 opacity-0"
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Add muscle
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="goal"
        value="lose"
        class="peer absolute inset-0 z-10 opacity-0"
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Lose weight
    </span>
    </label>
</div>

<!-- ACTIVITY SECTION -->
<h3
    class="text-[#0e1b19] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4"
>
    How active are you?
</h3>
<div class="flex flex-col gap-3 p-4">
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="activity"
        value="sedentary"
        class="peer absolute inset-0 z-10 opacity-0"
        checked
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Sedentary
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="activity"
        value="lightly"
        class="peer absolute inset-0 z-10 opacity-0"
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Lightly active
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="activity"
        value="active"
        class="peer absolute inset-0 z-10 opacity-0"
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Active
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="activity"
        value="very"
        class="peer absolute inset-0 z-10 opacity-0"
    />
    <span
        class="block text-sm font-medium leading-normal rounded-xl border border-[#d0e6e4] px-4 py-3 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        Very active
    </span>
    </label>
</div>

<!-- PLAN LENGTH SECTION -->
<h3
    class="text-[#0e1b19] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4"
>
    How long would you like your plan to be?
</h3>
<div class="flex flex-wrap gap-3 p-4">
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="planLength"
        value="4"
        class="peer absolute inset-0 opacity-0 z-10"
        checked
    />
    <span
        class="block text-sm font-medium leading-normal flex items-center justify-center rounded-xl border border-[#d0e6e4] px-4 h-11 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        4 weeks
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="planLength"
        value="8"
        class="peer absolute inset-0 opacity-0 z-10"
    />
    <span
        class="block text-sm font-medium leading-normal flex items-center justify-center rounded-xl border border-[#d0e6e4] px-4 h-11 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        8 weeks
    </span>
    </label>
    <label class="relative cursor-pointer">
    <input
        type="radio"
        name="planLength"
        value="12"
        class="peer absolute inset-0 opacity-0 z-10"
    />
    <span
        class="block text-sm font-medium leading-normal flex items-center justify-center rounded-xl border border-[#d0e6e4] px-4 h-11 text-[#0e1b19] peer-checked:border-2 peer-checked:border-[#1ce3cf] peer-checked:bg-[#1ce3cf] peer-checked:text-white transition-colors"
    >
        12 weeks
    </span>
    </label>
</div>

<!-- Continue Button -->
<div class="flex px-4 py-3 justify-end">
    <button
    id="continueBtn"
    class="flex items-center justify-center rounded-full h-12 px-5 bg-[#1ce3cf] text-[#0e1b19] text-base font-bold leading-normal whitespace-nowrap"
    >
    Continue
    </button>
</div>

<p
    class="text-[#4f968f] text-sm font-normal leading-normal pb-3 pt-1 px-4"
>
    Note: Creating a new plan will overwrite any existing plan data.
</p>
</div>

<script>
      document.addEventListener("DOMContentLoaded", () => {
        const continueBtn = document.getElementById("continueBtn");
        continueBtn.addEventListener("click", handleContinue);
      });

      async function handleContinue() {
        const goal =
          document.querySelector('input[name="goal"]:checked')?.value ||
          "maintain";
        const activity =
          document.querySelector('input[name="activity"]:checked')?.value ||
          "sedentary";
        const planLength =
          document.querySelector('input[name="planLength"]:checked')?.value ||
          "4";

        try {
          const resp = await fetch("/api/createplan", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ goal, activity, planLength }),
          });
          if (!resp.ok) {
            console.warn("Create plan failed:", resp.status);
            return;
          }
          const data = await resp.json();
          if (data.success) {
            window.location.href = "/finalizeplan";
          }
        } catch (err) {
          console.error("Error creating plan:", err);
        }
      }
</script>